(function(){if(typeof XMLHttpRequest!=='function'||typeof Proxy!=='function'||typeof Reflect!=='object'){return}window.XMLHttpRequest=new Proxy(XMLHttpRequest,{construct(ctor){var XMLReq=new ctor;return new Proxy(XMLReq,new function(XMLReq){var that=this;this.XMLReq=XMLReq;this.XMLReq.onreadystatechange=function(){that.onReadyStateChange()};this.XMLReq.onabort=function(){that.onAbort()};this.XMLReq.ontimeout=function(){that.onTimeout()};this.item={};this.item.requestHeader={};this.get=function(target,key){switch(key){case'open':return that.getOpen(target);case'send':return that.getSend(target);case'setRequestHeader':return that.getSetRequestHeader(target);default:var value=Reflect.get(target,key);if(typeof value==='function'){return value.bind(target)}else{return value}}};this.set=function(target,key,value){switch(key){case'onreadystatechange':return that.setOnReadyStateChange(target,key,value);case'onabort':return that.setOnAbort(target,key,value);case'ontimeout':return that.setOnTimeout(target,key,value);default:}return Reflect.set(target,key,value)};this.getOpen=function(target){var targetFunction=Reflect.get(target,'open');return function(){var args=arguments;var method=args[0];var url=args[1];that.item.method=method?method.toUpperCase():'GET';that.item.url=url||'';return targetFunction.apply(target,args)}};this.getSend=function(target){var targetFunction=Reflect.get(target,'send');return function(){var args=arguments;var data=args[0];that.item.postData=data;return targetFunction.apply(target,args)}};this.getSetRequestHeader=function(target){var targetFunction=Reflect.get(target,'setRequestHeader');return function(){var args=arguments;that.item.requestHeader[args[0]]=args[1];return targetFunction.apply(target,args)}};this.setOnReadyStateChange=function(target,key,value){return Reflect.set(target,key,function(){var args=arguments;that.onReadyStateChange();value.apply(target,args)})};this.setOnAbort=function(target,key,value){return Reflect.set(target,key,function(){var args=arguments;that.onAbort();value.apply(target,args)})};this.setOnTimeout=function(target,key,value){return Reflect.set(target,key,function(){var args=arguments;that.onTimeout();value.apply(target,args)})};this.onReadyStateChange=function(){that.item.readyState=that.XMLReq.readyState;that.item.responseType=that.XMLReq.responseType;switch(that.XMLReq.readyState){case 0:case 1:that.item.status=0;that.item.statusText='Pending';if(!that.item.startTime){that.item.startTime=Date.now()}break;case 2:that.item.status=that.XMLReq.status;that.item.statusText='Loading';that.item.responseHeader={};var responseHeader=that.XMLReq.getAllResponseHeaders()||'';if(1){that.item.responseHeader=responseHeader}else{}break;case 3:that.item.status=that.XMLReq.status;that.item.statusText='Loading';if(!!that.XMLReq.response&&that.XMLReq.response.length){that.item.responseSize=that.XMLReq.response.length}break;case 4:that.item.status=that.XMLReq.status||that.item.status||0;that.item.statusText=String(that.item.status);that.item.endTime=Date.now();that.item.costTime=that.item.endTime-(that.item.startTime||that.item.endTime);that.item.response=that.XMLReq.response;if(!!that.XMLReq.response&&that.XMLReq.response.length){that.item.responseSize=that.XMLReq.response.length}that.triggerUpdate();break;default:that.item.status=that.XMLReq.status;that.item.statusText='Unknown';that.triggerUpdate();break}};this.onAbort=function(){that.item.cancelState=1;that.item.statusText='Abort';that.triggerUpdate()};this.onTimeout=function(){that.item.cancelState=3;that.item.statusText='Timeout';that.triggerUpdate()};this.triggerUpdate=function(){var data=that.item;try{%@.sendNative(JSON.parse(JSON.stringify(data)))}catch(error){}}}(XMLReq))}})})();